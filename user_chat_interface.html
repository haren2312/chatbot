<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Floating Seva Bot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="user_chat_interface.css">
</head>
<body>



<button id="chatbot-toggle">
  <img id="chat-icon-img" src="images/chat-icon.png" style="display:block;" />
  <img id="close-icon-img" src="images/close-icon.png" style="display:none;" />
</button>


<div id="chat-container">
  <!-- Name Prompt -->
  <div id="name-prompt" class="prompt-box">
    <div class="prompt-header">
      <div class="bot-avatar"><img src="images/logo.jpg" alt="Bot Avatar" class="bot-avatar" /></div>
      <div>
        <h3 class="prompt-title">Welcome to E-invite</h3>
        <p class="prompt-subtitle">Your Virtual Assistant</p>
      </div>
    </div>
    <div class="prompt-content">
      <label for="nameInput" class="prompt-label">What's your name?</label>
      <input id="nameInput" type="text" placeholder="Enter your name..." />
      <button onclick="startChat()">Next</button>
    </div>
  </div>

  <!-- Email Prompt -->
  <div id="email-prompt" class="prompt-box" style="display:none;">
    <div class="prompt-header">
      <div class="bot-avatar"><img src="images/logo.jpg" alt="Bot Avatar" class="bot-avatar" /></div>
      <div>
        <h3 class="prompt-title">Email Required</h3>
        <p class="prompt-subtitle">We'll keep you updated</p>
      </div>
    </div>
    <div class="prompt-content">
      <label for="emailInput" class="prompt-label">Please enter your email:</label>
      <input id="emailInput" type="email" placeholder="Your email..." />
      <button onclick="submitEmail()">Submit Email</button>
    </div>
  </div>

  <!-- Location Prompt -->
  <div id="location-prompt" class="prompt-box" style="display:none;">
    <div class="prompt-header">
      <div class="bot-avatar">üìç</div>
      <div>
        <h3 class="prompt-title">Location Access</h3>
        <p class="prompt-subtitle">For better assistance</p>
      </div>
    </div>
    <div class="prompt-content">
      <label class="prompt-label">Please share your location for personalized service:</label>
      <button onclick="getLocation()">Share Location</button>
      <button onclick="skipLocation()" style="background: #6b7280;">Skip for Now</button>
      <p id="location-status"></p>
    </div>
  </div>

  <!-- Main Chat Interface -->
  <div id="chat" class="chat-bot-bg">
    <div class="chat-header">
  <!-- Crisp-style Chat Button Centered at Top -->
  <div class="chat-header-top">
    <button class="crisp-chat-btn">
      <span class="chat-icon-circle">
        <img src="images/crsip-msg.png" alt="Chat Icon" class="chat-icon" />
      </span>
      <span class="chat-btn-label">Chat</span>
    </button>
  </div>
  <!-- Row: Avatar + Name + Menu (Aligned Center, Not Wrapping) -->
  <div class="chat-header-main">
    <img src="images/logo.jpg" class="header-avatar" />
    <div class="header-info">
      <div class="header-title">E from E inviter</div>
    </div>
  </div>
</div>
    <div id="messages" class="chat-messages"></div>

    <div id="typing-indicator" style="display:none;margin:6px 0 0 16px;"></div>

<hr style="width: 85%; margin-left: 20px; border: 1px solid #ebebeb;
" >
    <div class="input-row">
      <input id="input" type="text" placeholder="Type your message..." />
    </div>
    <div style="text-align: end; padding: 0 5px 5px 0; background-color: white;">
     <input type="file" id="imageUpload" accept="image/*" style="display:none;" onchange="uploadImage()">
      <button id="chat-btn" class="upload-button" onclick="document.getElementById('imageUpload').click()" title="Upload Image">üîó</button>
  <button id="emoji-btn" type="button">‚ù§Ô∏é</button>
      <button id="chat-btn" class="send-button" onclick="sendMsg()" title="Send Message">‚û§</button>
      <div id="emoji-picker" style="display:none;position:absolute;bottom:40px;left:110px;z-index:1000;background:#fff;padding:6px 10px;border:1px solid #ddd;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,0.1);"></div>
</div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

<script src="https://cdn.jsdelivr.net/npm/@joeattardi/emoji-button@4.6.4/dist/emoji-button.min.js"></script>

<script src="user_chat_interface.js"></script>
</body>
</html>