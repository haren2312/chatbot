<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Seva Bot</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body>
          <div id="chat-header">
               <img src="bot-avatar.png" alt="Bot Avatar" style="width: 36px; height: 36px; border-radius: 50%; margin-right: 10px;">
               <span><strong>Seva Bot</strong></span>
               </div>
          <div id="chatbot-widget"></div>
          <form id="uploadForm" enctype="multipart/form-data" onsubmit="return uploadImage();">
  <input type="file" id="imageInput" accept="image/*" />
  <button type="submit">Send Image</button>
</form>
          <script src="chatbot.js"></script>
          <link rel="stylesheet" href="chatbot.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>




















<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyCuzXtnMzjJ76N8PH-I4ZND5NnyVfD3XjE",
    authDomain: "chatbot-0405.firebaseapp.com",
    databaseURL: "https://chatbot-0405-default-rtdb.firebaseio.com",
    projectId: "chatbot-0405",
    storageBucket: "chatbot-0405.firebasestorage.app",
    messagingSenderId: "62504000476",
    appId: "1:62504000476:web:c1a92e6fa1db26b1668d19",
    measurementId: "G-5SSERC2EG6"
  };

  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();
  const sessionId = 'user_' + Date.now();

  function addMessage(text, who) {
    const div = document.createElement("div");
    div.className = "msg " + who;
    div.innerText = text;
    document.getElementById("messages").appendChild(div);
    document.getElementById("messages").scrollTop = 99999;
  }

  function sendMsg() {
    const input = document.getElementById("input");
    const msg = input.value.trim();
    if (!msg) return;
    addMessage(msg, "user");
    db.ref("chats/" + sessionId).push({ sender: "user", message: msg });
    input.value = "";

    // Simulated Bot Response
    setTimeout(() => {
      if (msg.toLowerCase().includes("refund") || msg.toLowerCase().includes("defect")) {
        addMessage("Please wait. Connecting you to a real support agent...", "bot");
      } else {
        const reply = "I'm Flipkart Buddy. I can help you with orders, delivery and more!";
        addMessage(reply, "bot");
        db.ref("chats/" + sessionId).push({ sender: "bot", message: reply });
      }
    }, 200);
  }

  // Listen for agent messages
  db.ref("chats/" + sessionId).on("child_added", snap => {
    const data = snap.val();
    if (data.sender === "agent") {
      addMessage("Agent: " + data.message, "agent");
    }
  });
</script>